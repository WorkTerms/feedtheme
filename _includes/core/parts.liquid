{%- assign tag = ""                              -%}

{%- assign primes = primes | push: num           -%}
{%- assign order = primes | size                 -%}

{%- if primes contains order                     -%}
{%-   unless parts                               -%}
{%-     assign parts = '' | split: ','           -%}
{%-   endunless                                  -%}
{%-   assign parts = parts | push: order         -%}
{%-   assign width = parts | size                -%}

{%-   if parts contains width                    -%}
{%-     include core/_parts.liquid               -%}
{%-   endif                                      -%}

{%-   assign array_size = array | size           -%}
{%-   assign layer_size = array[layer] | size    -%}

{%-   if _keys contains width                    -%}
{%-     assign tag = "*"                         -%}
{%-   endif                                      -%}

{%-   if layer_size == 10                        -%}

{%-     assign node_type = "main"                -%}
{%-     include core/node.liquid                 -%}
{%-     include core/_node.liquid                -%}
{%-     assign layer = layer | plus: 1           -%}

{%-   elsif keys contains width                  -%}

{%-     assign node_type = "lexer"               -%}
{%-     include core/node.liquid                 -%}
{%-     include core/_node.liquid                -%}

{%-   else                                       -%}
{%-     include core/node.liquid                 -%}
{%-   endif                                      -%}

{%- endif                                        -%}

