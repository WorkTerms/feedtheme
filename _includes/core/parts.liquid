{%- assign tag = "[]"                     -%}

{%- assign primes = primes | push: num    -%}
{%- assign probe = primes | size          -%}
{
{%- if primes contains probe              -%}

{%-   unless parts                        -%}
{%-     assign parts = '' | split: ','    -%}
{%-   endunless                           -%}

{%-   assign parts = parts | push: probe  -%}
{%-   assign order = parts | size         -%}

{%-   if parts contains order             -%}
{%-     unless array                        -%}
{%-       assign array = '' | split: ','    -%}
{%-     endunless                           -%}
{%-     include core/bond.liquid          -%}
{%-   endif                               -%}

{%-   if num > 1000 and probe < _brake    -%}
{%-     assign id = id | plus: 1          -%}
{%-     include core/_parts.liquid        -%}
{%-   endif                               -%}

{%- endif                                 -%}

{%- if num < 1000 or probe >= _brake      -%}
{%-   assign id = id | plus: 1            -%}
{%-   include core/_parts.liquid          -%}
{%- endif                                 -%}
