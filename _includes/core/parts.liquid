{%- assign tag = "[]"                     -%}
{%- assign lead = 289                     -%}

{%- assign primes = primes | push: num    -%}
{%- assign order = primes | size          -%}

{%- if num < 1000 or id > lead            -%}
{%-   assign id = id | plus: 1            -%}
{%-   include core/_parts.liquid          -%}
{%- endif                                 -%}

{%- if primes contains order              -%}

{%-   unless parts                        -%}
{%-     assign parts = '' | split: ','    -%}
{%-   endunless                           -%}

{%-   assign parts = parts | push: order  -%}
{%-   assign width = parts | size         -%}

{%-   if _keys contains width             -%}
{%-     assign tag = "[]*"                -%}
{%-   endif                               -%}

{%-   if parts contains width             -%}
{%-     include core/bond.liquid          -%}
{%-   endif                               -%}

{%-   if num > 1000 and id <= lead        -%}
{%-     assign id = id | plus: 1          -%}
{%-     include core/_parts.liquid        -%}
{%-   endif                               -%}

{%- endif                                 -%}
