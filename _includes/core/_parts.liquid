{%- assign id = id | plus: 1               -%}
{%- assign tag = _bond | jsonify           -%}
{%- assign weight = array[1] | size        -%}
{%- assign expanse = array[2] | size       -%}
{%- assign width = bond | last | size      -%}
{%- assign size = bond | size | plus: 1    -%}
{%- assign property = bond[layer] | size   -%}

{%- for prime in primes                    -%}
{%-   assign loop = forloop.index          -%}
{%-   if id <= prime                       -%}
{%-     break                              -%}
{%-   endif                                -%}
{%- endfor                                 -%}

{%- if id <= 102                           -%}
{%-   assign lexer = id                     -%}
{%-   assign parser = id                   -%}
{%-   assign grammar = 0                   -%}
{%- elsif id <= 329                        -%}
{%-   assign lexer = 102                    -%}
{%-   assign parser = id                   -%}
{%-   assign grammar = 0                   -%}
{%- else                                   -%}
{%-   assign lexer = 102                    -%}
{%-   assign parser = 329                  -%}
{%-   assign grammar = id | minus: 329     -%}
{%- endif                                  -%}
	   
{%- include core/node.liquid               -%}

{%- if _stage contains id                  -%}

{%-   assign node_type = "main"            -%}
{%-   assign layer = layer | plus: 1       -%}
{%-   include core/_node.liquid            -%}

{%- elsif _branch contains id              -%}

{%-   assign node_type = "branch"          -%}
{%-   include core/_node.liquid            -%}

{%- endif                                  -%}
