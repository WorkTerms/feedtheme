{%- assign item = page -%}{%- include leads/rest/item_dir.liquid -%}
{%- include leads/rest/workdir.liquid workdir=item_dir -%}

{% comment %} prev and next {% endcomment %}
{%- assign index = 0 -%}
{%- for item in workdir_files %}
    {%- if item.path contains 'README.md' -%}
        {%- assign index = forloop.index -%}
    {%- endif %}
{%- endfor -%}

{%- for item in workdir_files -%}
    {%- assign index_prev = index | minus: 1 -%}
    {%- assign index_next = index | plus: 1 -%}
    {%- if forloop.index == index_prev -%}
        {%- assign prev = item -%}
    {%- endif %}
    {%- if forloop.index == index_next -%}
        {%- assign next = item -%}
    {%- endif %}
{%- endfor -%}

{%- assign id = '' | split: ',' -%}
{%- assign arm = '' | split: ',' -%}
{%- assign bond = '' | split: ',' -%}
{%- assign parts = '' | split: ',' -%}

{%- assign stages = '' | split: ',' -%}
{%- assign stages = stages | push: 'lexer' | push: 'parser' | push: 'grammar' -%}

{%- capture lexer %}[7;13;29;109](102): Spin 7 to 109 via 30 of 1+29 (10th prime){% endcapture -%}
{%- capture parser %}[13;43;66;139](329): Spin 13 to 43 via 139=109+30 (1st-step of 36 on the 1st-layer){% endcapture -%}
{%- capture grammar %}[19;68;89;168](289): Spin 19 of (43 to 89) via 169=139+30 (2nd-step of 36 on the 2nd-layer){% endcapture -%}
{%- capture mapping %}[29;69;114;168](618){% endcapture -%}

{%- assign titles = '' | split: ',' -%}
{%- assign titles = titles | push: lexer | push: parser | push: grammar -%}
