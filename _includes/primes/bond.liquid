{%- assign index = include.index | default: 0  -%}

{%- unless array                               -%}
{%-   assign array = '' | split: ','           -%}
{%- endunless                                  -%}

{%- unless array[index]                        -%}

{%-   assign var = '' | split: ','             -%}
{%-   assign var = var | push: probe           -%}
{%-	  assign array = array | push: var         -%}

{%- else                                       -%}

{%-   assign var = array[index]                -%}
{%-   assign var = var | push: probe           -%}

{%-   assign dummy = '' | split: ','           -%}
{%-   for item in array                        -%}
{%-     assign dummy = dummy | push: item      -%}
{%-   endfor                                   -%}

{%-   assign array = '' | split: ','           -%}
{%-   for item in dummy                        -%}
{%-	    if forloop.index0 == index             -%}
{%-	      assign array = array | push: var     -%}
{%-     else                                   -%}
{%-       assign array = array | push: item    -%}
{%-     endif                                  -%}
{%-   endfor                                   -%}

{%- endunless                                  -%}

{%-	assign probe = var | size                  -%}
{%- if var contains probe                      -%}

{%-   assign index = index | plus: 1           -%}
{%-   include primes/bond.liquid index=index   -%}

{%- else                                       -%}

{%-   for item in array reversed               -%}
{%-     assign _bond = _bond | push: item      -%}
{%-   endfor                                   -%}

{%-   include primes/_bond.liquid              -%}

{%- endif                                      -%}
